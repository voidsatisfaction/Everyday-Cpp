<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=x-euc-jp">
<title>ロベールのＣ＋＋教室 - 第４５章 ２進数と１６進数 -</title>
</head>
<body bgcolor=white>

<center>
<font size=6>第４５章　２進数と１６進数</font>
</center>
<hr>

<p>　コンピューターは０と１で情報を扱うと前に話しました。これを意識してプログラムを扱うときには、１０進法では少し考えにくくなってしまいます。この章ではそんなときに便利な概念について話します。</p>

<hr>

<p>　では、今回の要点です。</p>

<font size=+2 color=red>
<ul>
<li>１６進数なら２進数を意識したプログラムが組みやすい。</li>
<li>１６進数では０〜９、Ａ〜Ｆの１６個の「数字」を使う。</li>
<li>１６進数を表現するときは、頭に 0x を付ける。</li>
</ul>
</font>
<p><br></p>

<p>　では、いってみましょう。</p>

<hr>

<p>　さて、私たちは普段の生活で何の疑問もなしに１０進数を使っています。（疑問を持って使っている人は、なかなか数学の素質があるかもしれませんね。）<font color=red>１０進数とは、０〜９の１０個の数字を使って表現された数のことです。</font>数が無くなってしまう「９」の次は、<font color=red>桁をあげて</font>「１０」と表現するのですね。</p>

<p>　しかし、同じような理屈を使えば、０〜２でも、０〜６でも数値を表現することができます。新しい数字を作れば、２０進数でも１００進数でも表現することができます。</p>

<p>　そして、たとえ３進数で表現されていても、７進数で表現されていても、１００進数で表現されていても、違う形であれ同じ数値を表現することが出来ます。（小数では循環小数になってしまうこともありますが。）そして、<font color=red>全ての表現は全く等価なのです</font>。</p>

<hr>

<p>　では、先ずは考えやすい所から、０〜４の５個の数字を使った、５進数を考えてみましょう。</p>

<p>　先ず、上の１０進数の定義に、５進数用の条件を当てはめてみましょう。すると、「<font color=red>５進数</font>とは、<font color=red>０〜４</font>の<font color=red>５個の数字</font>を使って表現された数のことです。<font color=red>数が無くなってしまう「４」の次</font>は、<font color=red>桁をあげて「１０」</font>と表現します。」となることが分かります。これが５進数です。</p>

<p>　では、実際に数を表現してみましょう。０の次は１です。１の次は２です。え？　当たり前だって？　まぁ、我慢して下さい。</p>

<p>　では、４の次はいくらになるのでしょうか？　そうですね。１０です。１０の次は１１で、１１の次は１２です。</p>

<p>　そして、今度は１４の次はいくらになるのでしょうか？　そうですね。２０です。では、４４の次は？　これは１００になりますね。</p>

<p>　何だかとても当たり前のことを書いてますね。そして、<font color=red>これを当たり前のことだと思えることが大事です</font>。</p>

<hr>

<p>　では、５進数と１０進数の２つを同時に考えてみましょう。紛らわしいので、５進数は<font color=red>（１２４）<font size=-2>５</font></font>のように、１０進数は<font color=red>（１２４）<font size=-2>１０</font></font>のように表現します。</p>

<p>　小学校の時に、</p>

<pre>２１９＝１００×２＋１０×１＋１×９</pre>

<p>というようなことをやった覚えがあります。当時は「そんな当たり前のことを何でいちいちするんだ」と思いましたが、これはｎ進数を理解するときに助けになります。</p>

<p>　たとえば、（３２４）<font size=-2>５</font>を分解してみましょう。</p>

<pre>（３２４）<font size=-2>５</font>＝（１００）<font size=-2>５</font>×３＋（１０）<font size=-2>５</font>×２＋１×４</pre>

<p>となりますね。（１０）<font size=-2>５</font>とは、（４）<font size=-2>５</font>の次の数です。つまり、（５）<font size=-2>１０</font>の事になります。（１００）<font size=-2>５</font>は、（１０）<font size=-2>５</font>×（１０）<font size=-2>５</font>なので、（２５）<font size=-2>１０</font>になります。</p>

<p>　よって、上の式は</p>

<pre>（３２４）<font size=-2>５</font>＝（２５）<font size=-2>１０</font>×３＋（５）<font size=-2>１０</font>×２＋１×４</pre>

<p>と書き換えることが出来ます。つまり、（３２４）<font size=-2>５</font>＝（８９）<font size=-2>１０</font>になります。このようにすれば、５進数から１０進数へ簡単に変換出来ることが分かります。</p>

<hr>

<p>　では、１０進数から５進数を簡単に求める方法を考えてみましょう。</p>

<p>　さて、何の疑問もなく</p>

<pre>（３２４）<font size=-2>５</font>＝（１００）<font size=-2>５</font>×３＋（１０）<font size=-2>５</font>×２＋１×４</pre>

<p>という式を作りましたが、これは次のような手順をもって作ったとも考えられます。</p>

<p>　先ず、（３２４）<font size=-2>５</font>÷（１０）<font size=-2>５</font>を行います。すると、（３２）<font size=-2>５</font>...（４）<font size=-2>５</font>になりますね。この余りが（１）<font size=-2>５</font>の位に当たります。</p>

<p>　今度は次に、その時の商（３２）<font size=-2>５</font>を（１０）<font size=-2>５</font>で割ります。すると、商が（３）<font size=-2>５</font>になり、（２）<font size=-2>５</font>が余りになります。そして、この余りが今度は（１０）<font size=-2>５</font>の位に当たります。</p>

<p>　で、さらに、今度の商（３）<font size=-2>５</font>もついでに（１０）<font size=-2>５</font>で割ると、商はもちろん０になり、余りは（３）<font size=-2>５</font>になります。この余りが（１００）<font size=-2>５</font>の位に当たります。</p>

<p>　（１）<font size=-2>５</font>の位、（１０）<font size=-2>５</font>の位、（１００）<font size=-2>５</font>の位というのは、このような計算から求められるのです。</p>

<p>　「何を回りくどいことを」と思うかも知れませんが、こうやれば各位が求められることは分かるでしょう。</p>

<p>　さて、ここからが本番です。ここで上の文の５進数で表記されている部分を１０進数に直してみましょう。ただし、「（１）<font size=-2>５</font>の位」とかいう部分は除きます。すると、以下のようになります。</p>

<table border=1><tr><td><p>　先ず、（８９）<font size=-2>１０</font>÷（５）<font size=-2>１０</font>を行います。すると、（１７）<font size=-2>１０</font>...（４）<font size=-2>１０</font>になりますね。この余りが（１）<font size=-2>５</font>の位に当たります。</p>

<p>　今度は次に、その時の商（１７）<font size=-2>１０</font>を（５）<font size=-2>１０</font>で割ります。すると、商が（３）<font size=-2>１０</font>になり、（２）<font size=-2>１０</font>が余りになります。そして、この余りが今度は（１０）<font size=-2>５</font>の位に当たります。</p>

<p>　で、さらに、今度の商（３）<font size=-2>１０</font>もついでに（５）<font size=-2>１０</font>で割ると、商はもちろん０になり、余りは（３）<font size=-2>１０</font>になります。この余りが（１００）<font size=-2>５</font>の位に当たります。</p>

<p>　（１）<font size=-2>５</font>の位、（１０）<font size=-2>５</font>の位、（１００）<font size=-2>５</font>の位というのは、このような計算から求められるのです。</p></td></tr></table>

<p>　<font color=red>これが１０進数から５進数を求める方法です。</font>０〜４までは５進数でも１０進数でも同じなので、上のことから（８９）<font size=-2>１０</font>＝（３２４）<font size=-2>５</font>という事が分かりますね。</p>

<hr>

<p>　上では５進数を例にとって考えましたが、このことは何進数にでも適応できます。前者は<font color=red>進数の小さいものから大きいものへの変換</font>、後者は<font color=red>進数の大きいものから小さいものへの変換</font>にあたります。</p>

<p>　ということで、いよいよ２進数と１６進数の話に進みます。</p>

<p>　「コンピューターは０と１を使って数値を表現している」と<a href="cpp01021.html" target=main>第２１章</a>で話しました。これは「０と１という２個の数字を使って数値を表現している」ことになるので、<font color=red>２進数</font>です。つまり、上の文は<font color=red>「コンピューターは２進数を使って数値を表現している」</font>と書き換えることが出来ます。</p>

<p>　しかし、０と１だけで数値を表現すると、例えば（１２３４５）<font size=-2>１０</font>＝（１１００００００１１１００１）<font size=-2>２</font>となり、非常に長くなってしまいます。これでは人間にとってはあまり実用的ではないので、<font color=red>プログラムをするときは８進数か１６進数を使います</font>。</p>

<p>　１６進数は０〜９だけでは数字が足りないので、Ａ〜Ｆの６個のアルファベットを「数字」と見なして使います。<font color=red>「０〜Ｆという１６個の数字を使って数値を表現している」</font>わけです。</p>

<p>　（１０）<font size=-2>８</font>＝（１０００）<font size=-2>２</font>で、（１０）<font size=-2>１６</font>＝（１００００）<font size=-2>２</font>です。つまり、８進数では２進数の３桁が丁度１桁に対応し、１６進数では２進数の４桁が丁度１桁に対応します。</p>

<p>　え？　唐突すぎるって？　では、（１００１０１０１）<font size=-2>２</font>を例に取ってじっくり考えてみましょう。</p>

<hr>

<p>　では、先ず（１００１０１０１）<font size=-2>２</font>を８進数に直してみましょう。先にやった変換方法をちょっと変則的にした方法で直します。</p>

<p>　さて、やはりここは分解です。（１００１０１０１）<font size=-2>２</font>は</p>

<pre>（１００１０１０１）<font size=-2>２</font>＝（１００００００）<font size=-2>２</font>×（１０）<font size=-2>２</font>＋（１０００）<font size=-2>２</font>×（０１０）<font size=-2>２</font>＋（１）<font size=-2>２</font>×（１０１）<font size=-2>２</font></pre>

<p>のように分解できます。</p>

<p>　さて、もう分かりましたね。（１０００）<font size=-2>２</font>＝（１０）<font size=-2>８</font>と言いました。すると、（１００００００）<font size=-2>２</font>＝（１００）<font size=-2>８</font>になります。（１０）<font size=-2>２</font>＝（２）<font size=-2>８</font>、（１０１）<font size=-2>２</font>＝（５）<font size=-2>８</font>なので、上の式は</p>

<pre>（１００１０１０１）<font size=-2>２</font>＝（１００）<font size=-2>８</font>×（２）<font size=-2>８</font>＋（１０）<font size=-2>８</font>×（２）<font size=-2>８</font>＋（１）<font size=-2>８</font>×（５）<font size=-2>８</font></pre>

<p>となり、（１００１０１０１）<font size=-2>２</font>＝（２２５）<font size=-2>８</font>となります。</p>

<p>　これは、（１００１０１０１）<font size=-2>２</font>を３桁ずつ区切って（１０：０１０：１０１）<font size=-2>２</font>とし、各ブロックを変換したのと同じ事になります。</p>

<p>　１６進数でも同じ事です。（１００１０１０１）<font size=-2>２</font>を４桁ずつ区切って（１００１：０１０１）<font size=-2>２</font>とし、各ブロックを変換すると、（９５）<font size=-2>１６</font>となります。まぁ、各ブロックの変換はしなければなりませんが、１０進数と比べるとずいぶん変換しやすいことが分かります。</p>

<hr>

<p>　Ｃ／Ｃ＋＋言語では８進数と１６進数を表現できます。<font color=red>８進数は頭に「０」をつけて、１６進数は頭に「０ｘ」を付けて表現します。</font>１６進数のＡ〜Ｆは大文字でも小文字でも構いません。</p>

<pre>num = 214;  // １０進数
num = 0326; // ８進数
num = 0xD6; // １６進数</pre>

<p>　ただ、残念ながら<font color=red>２進数は表現できません</font>。８進数か１６進数に直して表現しなければなりません。</p>

<p>　また、８進数だと８桁の２進数、つまり１バイトの数値をブロックに分けると２桁：３桁：３桁という形になり、１６進数だと４桁：４桁という綺麗な形になることが分かります。２，４バイトの数値になると８進数では１バイト目と２バイト目，２バイト目と３バイト目の間に区切りが来ません。ということで、<font color=red>プログラムでは主に１６進数を使います</font>。</p>

<p>　ではこれを実際にどう活用するのか...は次回以降にまわして、今回はこのくらいで終わりにします。</p>

<hr>

<p>　では今回の要点です。</p>

<font size=+2 color=red>
<ul>
<li>１６進数なら２進数を意識したプログラムが組みやすい。</li>
<li>１６進数では０〜９、Ａ〜Ｆの１６個の「数字」を使う。</li>
<li>１６進数を表現するときは、頭に 0x を付ける。</li>
</ul>
</font>
<p><br></p>

<p>　今回はかなり長くなってしまいました。次回はもう少し短くしたいと思いますが...。では、次回まで。</p>

<hr>

<p align=right><a href="cpp01044.html" target="main">第４４章　いろんな計算を</a> | <a href="cpp01046.html" target="main">第４６章　ビットでいじろう</a></p>
<p align=right><font size=-1><i>Last update was done on 1999.11.23</i></font></p>

<p align=right><font size=-1><i>この講座の著作権は<a href="http://www1.kcn.ne.jp/~robe/">ロベール</a>が保有しています</i></font></p>

</body>
</html>
