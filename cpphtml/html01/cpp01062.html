<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=x-euc-jp">
<title>ロベールのＣ＋＋教室 - 第６２章 多次元配列２ -</title>
</head>
<body bgcolor=white>

<center>
<font size=6>第６２章　多次元配列２</font>
</center>
<hr>

<p>　多次元配列は、メモリ上にどのように並んでいるのでしょうか？　どんな順番で初期化されるのでしょうか？　今回は、そういうお話です。</p>

<hr>

<p>　では、今回の要点です。</p>

<font size=+2 color=red>
<ul>
<li>array[i][j] は要素 j 個の配列を１要素とする、要素 i 個の配列である。</li>
<li>array[i] は &amp;array[i][0] を表す。</li>
<li>初期化は array[0][0], array[0][1], ... の順に行われる。</li>
<li>配列のサイズを省略できるのは、１番目のもののみ。</li>
</ul>
</font>
<p><br></p>

<p>　では、いってみましょう。</p>

<hr>

<p>　さて、「配列変数の名前は、その配列の先頭のアドレスになる」と、<a href="cpp01035.html" target="main">第３５章</a>で言いました。</p>

<p>　この「配列変数の名前」というのは、「[ ] をのけたもの」と考えることもできます。では、多次元配列で [ ] をのけたものはどうなるのでしょうか？　例えば、<font color=red>int array[3][5];</font> としたとき、<font color=red>array[1]</font> はどうなるのでしょうか？</p>

<p>　実は、これはきちんと機能します。機能するということは、これもやはり<font color=red>何かの配列の先頭アドレス</font>になっているはずです。これは array[0] 〜 array[2] まであり、結局 array は配列の配列であることが分かると思います</p>

<p>　このように、多次元配列は、何て事はない、<font color=red>配列を配列にしているだけ</font>なのです。</p>

<p>　予想できるように、array[0] は array[0][0] 〜 array[0][4] という配列の先頭アドレス &amp;array[0][0] になります。つまり、int array[3][5] というのは、<font color=red>int 型５個の要素からなる配列を１つの要素とする、３つの要素からなる配列</font>なわけです。</p>

<p>　言葉で説明すると何とも分かりにくいので、下の図を見て下さい。</p>

<center><img src="images/0106201.gif" alt="int array[3][5];"></center>

<p>　array[0] を int 型５個の要素からなる配列 array_0 と、array[1] を int 型５個の要素からなる配列 array_1 と、array[2] を int 型５個の要素からなる配列 array_2 と見なすと、array は array_0, array_1, array_2 の３つの要素からなる配列ということになります。</p>

<p>　同じように、３次元配列は２次元配列の配列、４次元配列は３次元配列の配列、という風になっています。</p>

<hr>

<p>　で、メモリにはこの通りの順番で、隙間無く並んでいます。array[0][0] が一番はじめにあり、次に array[0][1] が、その次には array[0][2] があります。そして、array[0][4] の次は array[1][0] になります。このように、array[2][4] まで、順番に並んでいます。</p>

<p>　番号だけを書くと、<font color=red>(0, 0), (0, 1), (0, 2), ..., (1, 0), (1, 1), ...</font> という風になります。感覚的にもよく分かる順番になっていると思います。３次元だと、(0, 0, 0), (0, 0, 1), (0, 0, 2), ..., (0, 1, 0), (0, 1, 1), ..., (1, 0, 0), (1, 0, 1), ..., (1, 1, 0), (1, 1, 1), ... という順番になります。</p>

<p>　初期化も、この順番で行います。</p>

<pre>int array[3][5] = {
    {  1,  2,  3,  4,  5, },
    {  2,  4,  6,  8, 10, },
    {  3,  6,  9, 12, 15, },
};</pre>

<p>　配列の配列ということで、初期化の書き方も、<font color=red>配列の配列</font>と言わんばかりになっています。一応は { } なしでも動作に問題はないのですが、{ } をつけておく方が安心です。３次元、４次元も、同じような考えで初期化できます。</p>

<p>　また、<font color=red>配列の初期化の際には、普通は配列のサイズは書かないようにする</font>ものです。多次元配列ではどうなのでしょうか？</p>

<pre>int array[][] = {
    {  1,  2,  3,  4,  5, },
    {  2,  4,  6,  8, 10, },
    {  3,  6,  9, 12, 15, },
};</pre>

<p>　これだと、エラーが出てしまいますね...。では、これでどうでしょうか？</p>

<pre>int array[][5] = {
    {  1,  2,  3,  4,  5, },
    {  2,  4,  6,  8, 10, },
    {  3,  6,  9, 12, 15, },
};</pre>

<p>　これで、エラーはでないようです。要素を増やすときは</p>

<pre>int array[][5] = {
    {  1,  2,  3,  4,  5, },
    {  2,  4,  6,  8, 10, },
    {  3,  6,  9, 12, 15, },
    {  4,  8, 12, 16, 20, },
};</pre>

<p>という風にするので、<font color=red>一番最初の要素数を省略する</font>のもうなずける話ですね。</p>

<p>　２番目以降の要素数を省略できないのは仕様です。これはもう、仕方がないです。我慢しましょう。</p>

<hr>

<p>　それでは、今回のまとめです。</p>

<font size=+2 color=red>
<ul>
<li>array[i][j] は要素 j 個の配列を１要素とする、要素 i 個の配列である。</li>
<li>array[i] は &amp;array[i][0] を表す。</li>
<li>初期化は array[0][0], array[0][1], ... の順に行われる。</li>
<li>配列のサイズを省略できるのは、１番目のもののみ。</li>
</ul>
</font>
<p><br></p>

<p>　それでは、次回まで。</p>

<hr>

<p align=right><a href="cpp01061.html" target="main">第６１章　多次元配列</a> | <a href="cpp01063.html" target="main">第６３章　参照するな</a></p>
<p align=right><font size=-1><i>Last update was done on 2000.7.26</i></font></p>

<p align=right><font size=-1><i>この講座の著作権は<a href="http://www1.kcn.ne.jp/~robe/">ロベール</a>が保有しています</i></font></p>

</body>
</html>
